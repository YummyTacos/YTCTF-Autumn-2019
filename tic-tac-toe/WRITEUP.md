# Tic-Tac-Toe: Write-up
## Просто

Попробуем подключиться к серверу и поиграть с ботом. Понимаем, что с некоторым шансом он поддаётся,
но в основном играет честно. 

Если лень писать алгоритм для игры, ищем какие-нибудь готовые решалки на GitHub и 
допиливаем их, чтобы они играли за нас, записывая координаты первого хода. После успешно проведённых
игр получим флаг: `ytctf{i_l0v3_71c-74c-703_v3ry_much_c0z_it5_my_f4v0rit3_game_1_ev3r_played_l0l_th3b3s7}`

Если всё же не лень, то продолжаем читать.

## Сложно

Пишем функцию для общения с программой (*парсер*)

Придумываем алгоритм, который будет обыгрывать поддающегося бота (если бы он не поддавался, таск бы не решался)
 
> *Что если посчитать выгодность хода для каждой клетки и походить в самую выгодную...*

### Атака
Для каждой **пустой** клетки проходим по всем линиям длины 5, и если в линии нет крестиков, 
прибавим к выгодности клетки `(8^n)*2`, где `n` — кол-во ноликов в этой линии.

На месте функции `(8^n)*2` может быть любая другая, для которой выполняется условие `f(n)*4<f(n+1)`
или если ваша функция кажется подходящей для этой ситуации.

Но мы же не математики, зачем доказывать необходимость этого.
А ещё эта функция хорошо отображает выгодность клетки и легко вычисляется побитовым сдвигом.

### Оборона
Уххх этот бот мешает стоить наши ряды. отомстим ему1!!

По аналогии с атакой, будем прибавлять к выгодности клетки `(8^k)` за каждую линию без ноликов,
где `k` — кол-во крестиков.

Мы прибавляем в 2 раза меньше чем при атаке, потому что атака важнее обороны 
(например, у обоих игроков есть ряд из 4 крестиков/ноликов, тот кто ходит может закрыть ход 
противнику(оборона), но может просто выиграть(атака)).

### И что теперь?
~~Читай цель лабораторной работы пиши вывод~~ Ходим в самую *выгодную* клетку, пока не победим.

[Примерная реализация на C++](private/solution.cpp)

## P.S.
В идеале, мы должны были получить флаг, но т.к. я накосячил, пока фиксил баги, бот выдаёт только
каждый второй символ флага, поэтому таск был нерешабелен. В репозитории лежит [исходная версия][v1]
программы, а также [исправление][fix] для неё (если захочется поиграть ~~на уроках или парах~~).

Также можете посмотреть [райтап от VV3N33DM0RFL4G$][alt-writeup].

[alt-writeup]: https://github.com/weneedmoreflags/ytctf-autumn-2019/blob/master/Tic-Tac-Toe/WRITEUP.md
[v1]: private/tictactoe.cpp
[fix]: private/tictactoe_fixed.cpp
